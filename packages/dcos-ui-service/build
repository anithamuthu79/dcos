#!/bin/bash

# Directory to keep new downloaded versions of the UI
mkdir -p "$PKG_PATH"/versions

mkdir -p "$PKG_PATH"/bin
mv "/pkg/src/dcos-ui-service/dcos-ui-update-service-1976d7e1d41307b71841c555fd08573c63bc80b0" "$PKG_PATH"/bin/dcos-ui-service
chmod +x "$PKG_PATH"/bin/dcos-ui-service

# Create the service file
service="$PKG_PATH/dcos.target.wants_master/dcos-ui-service.service"
mkdir -p "$(dirname "$service")"
cp /pkg/extra/dcos-ui-service.service  "$service"

# Create the socket file
socket="$PKG_PATH/dcos.target.wants_master/dcos-ui-service.socket"
mkdir -p "$(dirname "$socket")"
cp /pkg/extra/dcos-ui-service.socket "$socket"
