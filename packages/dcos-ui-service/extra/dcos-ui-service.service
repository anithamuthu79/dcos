[Unit]
Description=DC/OS UI Service: service for DC/OS UI

[Service]
Restart=always
RestartSec=5

PermissionsStartOnly=True

User=dcos_ui_service

SupplementaryGroups=dcos_adminrouter

EnvironmentFile=/opt/mesosphere/environment

ExecStartPre=/bin/bash -c "mkdir -p /opt/mesosphere/active/dcos-ui-service/versions"
ExecStartPre=/bin/bash -c "chmod 775 /opt/mesosphere/active/dcos-ui-service/versions"
ExecStartPre=/bin/bash -c "chown root:dcos_ui_service /opt/mesosphere/active/dcos-ui-service/versions"

ExecStartPre=/opt/mesosphere/bin/bootstrap dcos-ui-service
ExecStart=/opt/mesosphere/bin/dcos-ui-service -listen-addr="/run/dcos/dcos-ui-service.sock" -default-ui-path="/opt/mesosphere/active/dcos-ui/usr" -asset-prefix="/" -versions-root="/opt/mesosphere/active/dcos-ui-service/versions"

Sockets=dcos-ui-service.socket
